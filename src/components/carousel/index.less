.setPosition(@n) when (@n <= 3) {
    @position: 50% + (@n - 1) * 20%;
    @rotateY: 90deg / @n * (@n - 1);
    @scale: 1 - 0.25 * (@n - 1);
    @t1: -50%;
    @t2: -10px;
    @t3: -20px;
    @t: "t@{n}";
    @opa: 1 - (@n - 1) * 0.25;

    &.li-@{n} {
        left: @position;
        transform-origin: left center;
        transform: translateX(@@t) rotateY(@rotateY) scale(@scale);
        z-index: 99;
        opacity: @opa;
    }

    .setPosition(@n + 1);
}
.setPosition(@n) when (@n > 3) and (@n <= 14) {
    @position: (14 - @n) * 10%;
    @rotateY: 105deg + (@n - 4) * 15deg;
    @scale: 0.4 - (6 - abs(@n - 9)) * 0.04;
    @t4: -45px;
    @t5: -10px;
    @t6: 0;
    @t7: 0;
    @t8: 10px;
    @t9: 30px;
    @t10: 60px;
    @t11: 60px;
    @t12: 60px;
    @t13: 60px;
    @t14: 75px;
    @t: "t@{n}";

    &.li-@{n} {
        left: @position;
        transform: translateX(@@t) rotateY(@rotateY) scale(@scale);
        z-index: 1;
        opacity: .3;
    }

    .setPosition(@n + 1);
}
.setPosition(@n) when (@n > 14) and (@n <= 16) {
    @position: (@n - 16) * 20%;
    @rotateY: 90deg / (16 - @n + 2) * (16 - @n + 1);
    @scale: 1 - 0.25 * (17 - @n);
    @t15: 20px;
    @t16: 10px;
    @t: "t@{n}";
    @opa: 1 - (17 - @n) * 0.25;

    &.li-@{n} {
        left: @position;
        transform-origin: right center;
        transform: translateX(@@t) rotateY(@rotateY) scale(@scale);
        z-index: 99;
        opacity: @opa;
    }

    .setPosition(@n + 1);
}

.carousel {
    position: relative;
    width: 1040px;
    max-width: 1050px;
    margin: 0 auto;
    padding: 20px;
    overflow: hidden;

    .arrow {
        position: absolute;
        display: block;
        font-size: 32px;
        font-weight: bold;
        top: 50%;
        transform: translateY(-50%) scale(1.5);
        cursor: pointer;

        &.arrow_left {
            left: 0;
        }

        &.arrow_right {
            right: 0;
        }
    }

    ul {
        display: flex;
        position: relative;
        flex-shrink: 0;
        flex-grow: 0;
        height: 35vh;
    }

    li {
        position: absolute;
        width: 300px;
        min-width: 300px;
        max-width: 300px;
        height: 35vh;
        max-height: 400px;
        border: 4px solid gold;
        border-radius: 10px;
        overflow: hidden;
        transform-origin: left center;
        transition: all .35s linear;

        .setPosition(1);

        a {
            display: block;
            height: 100%;

            img {
                width: 100%;
                height: 100%;
            }
        }
    }
}